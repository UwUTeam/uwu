<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"
    />
    <title>Админ-панель</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="/public/styles/admin/max.css" />
    <link rel="stylesheet" href="/public/styles/admin/menu.css" />
    <link rel="stylesheet" href="/public/styles/admin/pages.css" />
    <link rel="stylesheet" href="/public/styles/index/main.css" />
    <link rel="stylesheet" href="/public/styles/admin/menu-left.css" />
    <link rel="stylesheet" href="/public/styles/admin/login.css" />
  </head>
  <body>
    <div id="loginModal" class="modal-login">
      <div class="modal-content">
        <h2>Вход</h2>
        <div class="mb-3">
          <label for="login" class="form-label">Логин</label>
          <input type="text" class="form-control" id="login" />
        </div>
        <div class="mb-3">
          <label for="password" class="form-label">Пароль</label>
          <input type="password" class="form-control" id="password" />
        </div>
        <button id="loginBtn" class="btn btn-primary w-100">Войти</button>
      </div>
    </div>

    <div id="leftMenu" class="side-menu-left">
      <a href="javascript:void(0)" class="close-btn" onclick="closeLeftMenu()"
        >&times;</a
      >

      <!-- Аккордеон внутри меню -->
      <div class="accordion" id="accordionExample">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOne">
            <button
              class="accordion-button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseOne"
              aria-expanded="true"
              aria-controls="collapseOne"
            >
              Поиск
            </button>
          </h2>
          <div
            id="collapseOne"
            class="accordion-collapse collapse"
            aria-labelledby="headingOne"
            data-bs-parent="#accordionExample"
          >
            <div class="">
              <label for="exampleFormControlTextarea1" class="form-label"
                >Пример текстового поля</label
              >
              <textarea
                class="form-control"
                id="exampleFormControlTextarea1"
                rows="1"
              ></textarea>
            </div>
            <div class="">
              <label for="exampleFormControlTextarea1" class="form-label"
                >Пример текстового поля</label
              >
              <textarea
                class="form-control"
                id="exampleFormControlTextarea1"
                rows="1"
              ></textarea>
            </div>
          </div>

          <div
            id="collapseOne"
            class="accordion-collapse collapse"
            aria-labelledby="headingOne"
            data-bs-parent="#accordionExample"
          >
            <div class="">
              <label for="exampleFormControlTextarea1" class="form-label"
                >Пример текстового поля</label
              >
              <textarea
                class="form-control"
                id="exampleFormControlTextarea1"
                rows="1"
              ></textarea>
            </div>
            <div class="">
              <label for="exampleFormControlTextarea1" class="form-label"
                >Пример текстового поля</label
              >
              <textarea
                class="form-control"
                id="exampleFormControlTextarea1"
                rows="1"
              ></textarea>
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwo">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseTwo"
              aria-expanded="false"
              aria-controls="collapseTwo"
            >
              Слайдер
            </button>
          </h2>
          <div
            id="collapseTwo"
            class="accordion-collapse collapse"
            aria-labelledby="headingTwo"
            data-bs-parent="#accordionExample"
          >
            <div class="accordion-body">Контент для раздела "Слайдер".</div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThree">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseThree"
              aria-expanded="false"
              aria-controls="collapseThree"
            >
              Достоинство
            </button>
          </h2>
          <div
            id="collapseThree"
            class="accordion-collapse collapse"
            aria-labelledby="headingThree"
            data-bs-parent="#accordionExample"
          >
            <div class="accordion-body">Контент для раздела "Достоинство".</div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFour">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseFour"
              aria-expanded="false"
              aria-controls="collapseFour"
            >
              Вопросы требование
            </button>
          </h2>
          <div
            id="collapseFour"
            class="accordion-collapse collapse"
            aria-labelledby="headingFour"
            data-bs-parent="#accordionExample"
          >
            <div class="accordion-body">
              Контент для раздела "Вопросы требование".
            </div>
          </div>
        </div>
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingFive">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseFive"
              aria-expanded="false"
              aria-controls="collapseFive"
            >
              Новости
            </button>
          </h2>
          <div
            id="collapseFive"
            class="accordion-collapse collapse"
            aria-labelledby="headingFive"
            data-bs-parent="#accordionExample"
          >
            <div class="accordion-body">Контент для раздела "Новости".</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Правое меню -->
    <div id="rightMenu" class="side-menu-right">
      <a href="javascript:void(0)" class="close-btn" onclick="closeRightMenu()"
        >&times;</a
      >

      <!-- Аккордеон внутри правого меню -->
      <div class="accordion" id="accordionRightMenu">
        <div class="accordion-item">
          <h2 class="accordion-header" id="headingOneRight">
            <button
              class="accordion-button"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseOneRight"
              aria-expanded="true"
              aria-controls="collapseOneRight"
            >
              Настройки
            </button>
          </h2>
          <div
            id="collapseOneRight"
            class="accordion-collapse collapse"
            aria-labelledby="headingOneRight"
            data-bs-parent="#accordionRightMenu"
          >
            <div class="accordion-body">
              <div class="container">
                <h1 class="text-center">Color Palette</h1>

                <div class="row justify-content-center">
                  <div class="">
                    <div class="color-picker">
                      <input
                        type="color"
                        id="colorInput"
                        class="form-control form-control-color"
                      />
                    </div>
                    <div class="">
                      <label for="colorCode">Color Code:</label>
                      <input
                        type="text"
                        id="colorCode"
                        class="form-control"
                        placeholder="#000000"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingTwoRight">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseTwoRight"
              aria-expanded="false"
              aria-controls="collapseTwoRight"
            >
              Профиль
            </button>
          </h2>
          <div
            id="collapseTwoRight"
            class="accordion-collapse collapse"
            aria-labelledby="headingTwoRight"
            data-bs-parent="#accordionRightMenu"
          >
            <div class="accordion-body">Контент для раздела "Профиль".</div>
          </div>
        </div>

        <div class="accordion-item">
          <h2 class="accordion-header" id="headingThreeRight">
            <button
              class="accordion-button collapsed"
              type="button"
              data-bs-toggle="collapse"
              data-bs-target="#collapseThreeRight"
              aria-expanded="false"
              aria-controls="collapseThreeRight"
            >
              Помощь
            </button>
          </h2>
          <div
            id="collapseThreeRight"
            class="accordion-collapse collapse"
            aria-labelledby="headingThreeRight"
            data-bs-parent="#accordionRightMenu"
          >
            <div class="accordion-body">Контент для раздела "Помощь".</div>
          </div>
        </div>
      </div>
    </div>
    <div class="">
      <!--   <div class="col-2 menu-admin"></div> -->
      <div class="pages">
        <!-- Вкладки -->
        <ul class="tabs-a">
          <button class="open-btn" onclick="openLeftMenu()">
            &#9776; Открыть левое меню
          </button>
          <li class="tab-a active" data-target="pages-index">Главная</li>
          <li class="tab-a" data-target="pages-login">Логин</li>
          <li class="tab-a" data-target="pages-account">Аккаунт</li>
          <li class="tab-a" data-target="pages-about_us">О нас</li>
          <button class="open-btn open-btn-right" onclick="openRightMenu()">
            &#9776; Открыть правое меню
          </button>
        </ul>

        <!-- Блоки контента -->
        <div class="pages-content">
          <div class="pages-index active resizable-container border">
            <iframe class="index-pg" src="/public/index.html"></iframe>
            <div class="resizer"></div>
          </div>
          <div class="pages-login resizable-container border">
            <iframe class="index-pg" src="/public/login.html"></iframe>
            <div class="resizer"></div>
          </div>
          <div class="pages-account resizable-container border">
            <iframe class="index-pg" src="/public/account.html"></iframe>
            <div class="resizer"></div>
          </div>
          <div class="pages-about_us resizable-container border">
            <iframe class="index-pg" src="/public/about_us.html"></iframe>
            <div class="resizer"></div>
          </div>
        </div>
      </div>
    </div>

    <!--  <div class=".news-block-content container mt-5">
      <h1>Редактирование контента</h1>

     
      <div class="mb-3">
        <label for="main-title" class="form-label">Заголовок страницы:</label>
        <textarea
          id="main-title"
          class="form-control"
          rows="2"
          data-key="main-title"
        ></textarea>
      </div>
      <div class="mb-3">
        <label for="main-text" class="form-label">Текст страницы:</label>
        <textarea
          id="main-text"
          class="form-control"
          rows="4"
          data-key="main-text"
        ></textarea>
      </div>

      
      <button id="save-text" class="btn btn-primary">
        Сохранить изменения
      </button>
    </div> -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const colorInput = document.getElementById("colorInput");
        const colorCode = document.getElementById("colorCode");
        const colorDisplay = document.getElementById("colorDisplay");

        colorInput.addEventListener("input", function () {
          const selectedColor = colorInput.value;
          colorCode.value = selectedColor;
          colorDisplay.style.backgroundColor = selectedColor;
        });

        colorCode.addEventListener("input", function () {
          const inputColor = colorCode.value;
          if (/^#[0-9A-F]{6}$/i.test(inputColor)) {
            colorInput.value = inputColor;
            colorDisplay.style.backgroundColor = inputColor;
          }
        });
      });
    </script>
    <script>
      // Функции для левого меню
      function openLeftMenu() {
        document.getElementById("leftMenu").style.width = "250px";
      }

      function closeLeftMenu() {
        document.getElementById("leftMenu").style.width = "0";
      }

      // Функции для правого меню
      function openRightMenu() {
        document.getElementById("rightMenu").style.width = "250px";
      }

      function closeRightMenu() {
        document.getElementById("rightMenu").style.width = "0";
      }
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll(".tab-a");
        const pages = document.querySelectorAll(".pages-content div");

        tabs.forEach((tab) => {
          tab.addEventListener("click", function () {
            // Удаляем класс active у всех вкладок и блоков
            tabs.forEach((t) => t.classList.remove("active"));
            pages.forEach((page) => page.classList.remove("active"));

            // Добавляем класс active к выбранной вкладке и соответствующему блоку
            this.classList.add("active");
            const target = this.getAttribute("data-target");
            document.querySelector(`.${target}`).classList.add("active");
          });
        });
      });
    </script>
    <script>
      const resizer = document.querySelector(".resizer");
      const container = document.querySelector(".resizable-container");

      resizer.addEventListener("mousedown", function (e) {
        e.preventDefault();

        window.addEventListener("mousemove", resize);
        window.addEventListener("mouseup", stopResize);
      });

      function resize(e) {
        container.style.width =
          e.pageX - container.getBoundingClientRect().left + "px";
        container.style.height =
          e.pageY - container.getBoundingClientRect().top + "px";
      }

      function stopResize() {
        window.removeEventListener("mousemove", resize);
        window.removeEventListener("mouseup", stopResize);
      }
    </script>
    <script>
      // Загружаем текст с сервера при загрузке страницы
      fetch("/get-text")
        .then((response) => response.json()) // Получаем JSON-ответ от сервера
        .then((data) => {
          document.querySelectorAll("textarea").forEach((element) => {
            const key = element.getAttribute("data-key");
            if (data[key]) {
              element.value = data[key]; // Вставляем текст из json в textarea
            }
          });
        })
        .catch((err) => console.log("Ошибка при загрузке текста:", err));

      // Сохраняем изменения при нажатии кнопки "Сохранить"
      document
        .getElementById("save-text")
        .addEventListener("click", function () {
          const updatedContent = {};

          document.querySelectorAll("textarea").forEach((element) => {
            const key = element.getAttribute("data-key");
            updatedContent[key] = element.value; // Сохраняем содержимое textarea
          });

          fetch("/update-text", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify(updatedContent), // Преобразуем данные в JSON
          })
            .then((response) => response.text())
            .then((result) => {
              alert("Изменения сохранены!"); // Сообщаем пользователю, что текст сохранен
            })
            .catch((err) => console.error("Ошибка при сохранении:", err));
        });
    </script>
    <script>
      // Проверка логина и пароля
      document
        .getElementById("loginBtn")
        .addEventListener("click", function () {
          const login = document.getElementById("login").value;
          const password = document.getElementById("password").value;

          if (login === "admin" && password === "admin") {
            // Сохранение статуса авторизации в LocalStorage
            localStorage.setItem("isAuthenticated", "true");
            document.getElementById("loginModal").style.display = "none";
            document.getElementById("main-content").style.display = "block";
          } else {
            alert("Неправильный логин или пароль!");
          }
        });

      // Проверка статуса авторизации при загрузке страницы
      document.addEventListener("DOMContentLoaded", function () {
        const isAuthenticated = localStorage.getItem("isAuthenticated");

        if (isAuthenticated === "true") {
          document.getElementById("loginModal").style.display = "none";
          document.getElementById("main-content").style.display = "block";
        } else {
          document.getElementById("main-content").style.display = "none";
          document.getElementById("loginModal").style.display = "flex";
        }
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
